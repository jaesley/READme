<% publication_dates = [] %>
<% current_user.books.each { |book| publication_dates << book.publication_date } %>
<% publication_dates = publication_dates.uniq.sort %>

<div class='releases'>
  <% publication_dates.each do |date| %>
    <div class='release-date'>
      <div class='date'><%= date.strftime('%B %e, %Y')%></div>
      <div class='books'>
        <% books = current_user.books.select { |book| book.publication_date == date } %>
        <% books = books.sort_by { |book| book.author.name.split(' ').last } %>
        <% books.each do |book| %>
          <%= render partial: 'books/show', locals: { book: book } %>
        <% end %>
      </div>
      </div>
  <% end %>
</div>
